!function(t){var e={};function i(a){if(e[a])return e[a].exports;var h=e[a]={i:a,l:!1,exports:{}};return t[a].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)i.d(a,h,function(e){return t[e]}.bind(null,h));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=11)}({1:function(t,e,i){"use strict";const a="#ccc",h="#000";e.a=class{constructor(t,e,i){this.barhMargine=10,this.width=0,this.height=0,this.keisenMargine=50,this.barWidth=0,this.barBoxWidth=0,this.graphwidth=0,this.graphHeight=0,this.rightMargin=0,this.maxGraphWidth=30,this.yearLabel="",this.positiveGraphHeight=0,this.negativeGraphHeight=0,this.gentenHeight=0,this.scaleY=[],this.barLabelHeight=0,this.n={x:10,y:10},this._chartContainer=t,this.targetKey=i,this.graphData={icon:"",key:"",label:[],name:"",term:"",unit:"",value:[]},e.dataset.forEach(t=>{t.key==this.targetKey&&(this.graphData=t,console.log(this.graphData))}),this.canvases=[],this.overlay={canvas:document.createElement("canvas"),context:null},this.chart={canvas:document.createElement("canvas"),context:null},this.grid={canvas:document.createElement("canvas"),context:null},this._create()}_create(){this.overlay.context=this.overlay.canvas.getContext("2d"),this.canvases.push(this.overlay.canvas),this.chart.context=this.chart.canvas.getContext("2d"),this.canvases.push(this.chart.canvas),this.grid.context=this.grid.canvas.getContext("2d"),this.canvases.push(this.grid.canvas),this.canvases.reverse(),this.canvases.forEach(t=>{var e;null===(e=this._chartContainer)||void 0===e||e.appendChild(t)}),this.initial(this._chartContainer),this.overlay.canvas.addEventListener("mousemove",t=>{this.drow(t,this.grid.context)})}initial(t){null!=t&&(this.width=t.clientWidth,this.height=t.clientHeight,this.chart.canvas.width=this.width,this.chart.canvas.height=this.height,this.grid.canvas.width=this.width,this.grid.canvas.height=this.height,this.overlay.canvas.width=this.width,this.overlay.canvas.height=this.height,this.graphwidth=this.width-2*this.keisenMargine,this.graphHeight=this.height-2*this.keisenMargine,this.drawBar(this.chart.context,this.chart.canvas))}writeYAxis(t,e,i,a){null!=t&&(t.fillStyle="#0063B1",t.font="12px sans-serif",t.textAlign="end",t.fillText(a.toString(),e,i))}drawBar(t,e){if(null==t)return;const i=this.graphData.label.length;this.barBoxWidth=Math.round(this.graphwidth/i)-this.barhMargine,this.barWidth=Math.round(this.graphwidth/i)-this.barhMargine>this.maxGraphWidth?this.maxGraphWidth:Math.round(this.graphwidth/i)-this.barhMargine,this.rightMargin=this.width-(this.keisenMargine+(this.barBoxWidth+this.barhMargine)*i-this.barBoxWidth),this.barLabelHeight=e.height-this.keisenMargine+20;const a=Math.ceil(this.graphData.value.reduce((t,e)=>Math.max(t,e))),h=Math.ceil(this.graphData.value.reduce((t,e)=>Math.min(t,e)));this.scaleY=this.makeYaxis(h,a,10),this.gentenHeight=e.height-this.keisenMargine;let s=0;for(let t=0;t<this.scaleY.length;t++)0==this.scaleY[this.scaleY.length-t-1]&&(this.gentenHeight=this.keisenMargine+Math.ceil(this.graphHeight*(t+1)/this.scaleY.length)),s=this.keisenMargine+Math.ceil(this.graphHeight/this.scaleY.length)*t;this.drawGentenKeisen(t,this.keisenMargine,this.gentenHeight,this.graphwidth),this.positiveGraphHeight=this.gentenHeight-this.keisenMargine,this.negativeGraphHeight=s-this.gentenHeight;for(let e=0;e<i;e++){if(null==this.overlay.context)return;this.overlay.context.fillStyle="red",this.overlay.context.font="12px sans-serif",this.overlay.context.textAlign="left",this.writeLabelX(e),this.writeGraphBar(t,e),this.writeDataAmount(e)}}writeLabelX(t){if("m"==this.graphData.term){let e=this.graphData.label[t].split("/");this.yearLabel==e[0]&&""!=this.yearLabel||(this.yearLabel=e[0],this.writeLabelXYear(t,e[0]+"年")),this.writeLabelXEach(t,e[1]+"月")}else if(this.graphData.term="q"){let e=this.graphData.label[t].split("/");console.log(this.yearLabel),this.yearLabel==e[0]&&""!=this.yearLabel||(this.yearLabel=e[0],this.writeLabelXYear(t,e[0]+"年")),this.writeLabelXEach(t,""+e[1])}}writeLabelXEach(t,e){null!=this.overlay.context&&this.overlay.context.fillText(e,this.keisenMargine+1.5*this.barhMargine+(this.barBoxWidth+this.barhMargine)*t,this.barLabelHeight)}writeLabelXYear(t,e){null!=this.overlay.context&&this.overlay.context.fillText(e,this.keisenMargine+1.5*this.barhMargine+(this.barBoxWidth+this.barhMargine)*t,this.barLabelHeight+14)}writeGraphBar(t,e){t.fillStyle="#81C784",t.fillRect(this.keisenMargine+this.barhMargine+(this.barBoxWidth+this.barhMargine)*e,this.graphData.value[e]>=0?this.gentenHeight-1:this.gentenHeight+1,this.barWidth,this.graphData.value[e]>=0?-this.positiveGraphHeight*this.graphData.value[e]/this.scaleY[this.scaleY.length-1]:this.negativeGraphHeight*this.graphData.value[e]/this.scaleY[0])}writeDataAmount(t){null!=this.overlay.context&&this.overlay.context.fillText(this.graphData.value[t].toLocaleString(),this.keisenMargine+this.barhMargine+(this.barBoxWidth+this.barhMargine)*t,this.graphData.value[t]>=0?this.gentenHeight-this.positiveGraphHeight*this.graphData.value[t]/this.scaleY[this.scaleY.length-1]-10:this.gentenHeight+this.negativeGraphHeight*this.graphData.value[t]/this.scaleY[0]+20)}drawGentenKeisen(t,e,i,s){null!=t&&(t.strokeStyle=a,t.strokeStyle=h,t.beginPath(),t.moveTo(e,i),t.lineTo(e,i),t.lineTo(e+s,i),t.stroke())}getXlabel(t){let e="";if("m"==this.graphData.term){let i=this.graphData.label[t].split("/");this.yearLabel!=i[0]||""==this.yearLabel?(this.yearLabel=i[0],e=i[0]+"年"):e=i[1]+"月"}else if(this.graphData.term="q"){let i=this.graphData.label[t].split("/");this.yearLabel!=i[0]||""==this.yearLabel?(this.yearLabel=i[0],e=i[0]+"年"):e=""+i[1]}return e}makeYaxis(t,e,i=10){let a=[];t==e&&(t-=10,e+=10);i<2?i=2:i>2&&(i-=2);let h=(e-t)/i,s=Math.floor(Math.log10(h)),r=Math.pow(10,s),n=Math.floor(h/r+.5)*r,l=n*Math.floor(t/n),g=n*Math.ceil(e/n),o=l;for(;a.push(o),o+=n,!(o>g););return a}drow(t,e){if(null==e)return;e.clearRect(0,0,this.width,this.height),t.offsetX<=this.keisenMargine+this.barhMargine?this.n.x=this.keisenMargine+this.barhMargine:t.offsetX>=this.width-this.rightMargin?this.n.x=this.width-this.rightMargin:this.n.x=Math.floor((t.offsetX-this.keisenMargine)/(this.barBoxWidth+this.barhMargine))*(this.barBoxWidth+this.barhMargine)+(this.keisenMargine+this.barhMargine),t.offsetY<this.keisenMargine?this.n.y=this.keisenMargine:t.offsetY>this.height-this.keisenMargine?this.n.y=this.height-this.keisenMargine:this.n.y=t.offsetY,e.fillStyle="#ccc",e.fillRect(this.n.x,this.keisenMargine,this.barWidth,this.graphHeight);let i=Math.floor((t.offsetX-this.keisenMargine)/(this.barBoxWidth+this.barhMargine));i<0?i=0:i>this.graphData.label.length-1&&(i=this.graphData.label.length-1),e.fillRect(this.keisenMargine,this.n.y,this.graphwidth,1),e.fillStyle="red",e.font="12px sans-serif",e.textBaseline="bottom",e.fillText(""+this.convertLabel(this.graphData.label[i]),this.n.x,this.keisenMargine-24),e.fillText(`${this.graphData.value[i].toLocaleString()}${this.graphData.unit}`,this.n.x,this.keisenMargine-10)}convertLabel(t){return`${t.split("/")[0]}年${t.split("/")[1]}月`}}},11:function(t,e,i){"use strict";i.r(e);var a=i(1);const h={name:"コインチェック株式会社",dataset:[{key:"revenue",term:"q",label:["2018/4-6","2018/7-9","2018/10-12","2019/1-3","2019/4-6","2019/7-9","2019/10-12","2020/1-3","2020/4-6"],value:[9.42,3.15,5.5,3.1,12.75,8.02,4.81,12.57,8.2],unit:"億円",name:"営業収益",icon:"bar-chart-2"},{key:"profit",term:"q",label:["2018/4-6","2018/7-9","2018/10-12","2019/1-3","2019/4-6","2019/7-9","2019/10-12","2020/1-3","2020/4-6"],value:[-2.59,-5.88,-3.24,-5.6,1.42,.09,-1.27,2.69,1.02],unit:"億円",name:"税引き前利益",icon:"activity"},{key:"hr",term:"q",label:["2018/4-6","2018/7-9","2018/10-12","2019/1-3","2019/4-6","2019/7-9","2019/10-12","2020/1-3","2020/4-6"],value:[4.06,3.73,4.32,5.36,3.99,3.08,2.58,3.21,2.94],unit:"億円",name:"人件費",icon:"users"},{key:"system",term:"q",label:["2018/4-6","2018/7-9","2018/10-12","2019/1-3","2019/4-6","2019/7-9","2019/10-12","2020/1-3","2020/4-6"],value:[2.92,2.71,3.43,4.19,3.39,2.59,1.51,1.55,1.39],unit:"億円",name:"システム関連費用",icon:"monitor"},{key:"ad",term:"q",label:["2018/4-6","2018/7-9","2018/10-12","2019/1-3","2019/4-6","2019/7-9","2019/10-12","2020/1-3","2020/4-6"],value:[700,1e3,1100,5600,4200,8700,5900,7500,5900],unit:"万円",name:"広告宣伝費",icon:"tv"}]};window.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("graph");null!=t&&new a.a(t,h,"revenue")}))}});