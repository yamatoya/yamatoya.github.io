!function(t){var i={};function e(h){if(i[h])return i[h].exports;var a=i[h]={i:h,l:!1,exports:{}};return t[h].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,h){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var h=Object.create(null);if(e.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(h,a,function(i){return t[i]}.bind(null,a));return h},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=13)}({13:function(t,i,e){"use strict";e.r(i);const h="#ccc",a="#000";var s=class{constructor(t,i){this.barhMargine=10,this.width=0,this.height=0,this.keisenMargine=50,this.barWidth=0,this.graphwidth=0,this.graphHeight=0,this.rightMargin=0,this.yearLabel="",this.n={x:10,y:10},this._chartContainer=t,this.graphData=i,this.canvases=[],this.overlay={canvas:document.createElement("canvas"),context:null},this.chart={canvas:document.createElement("canvas"),context:null},this.grid={canvas:document.createElement("canvas"),context:null},this._create()}_create(){this.overlay.context=this.overlay.canvas.getContext("2d"),this.canvases.push(this.overlay.canvas),this.chart.context=this.chart.canvas.getContext("2d"),this.canvases.push(this.chart.canvas),this.grid.context=this.grid.canvas.getContext("2d"),this.canvases.push(this.grid.canvas),this.canvases.reverse(),this.canvases.forEach(t=>{var i;null===(i=this._chartContainer)||void 0===i||i.appendChild(t)}),this.initial(this._chartContainer),this.overlay.canvas.addEventListener("mousemove",t=>{this.drow(t,this.grid.context)})}initial(t){null!=t&&(this.width=t.clientWidth,this.height=t.clientHeight,this.chart.canvas.width=this.width,this.chart.canvas.height=this.height,this.grid.canvas.width=this.width,this.grid.canvas.height=this.height,this.overlay.canvas.width=this.width,this.overlay.canvas.height=this.height,this.graphwidth=this.width-2*this.keisenMargine,this.graphHeight=this.height-2*this.keisenMargine,this.drawBar(this.chart.context,this.chart.canvas))}writeYAxis(t,i,e,h){null!=t&&(t.fillStyle="#0063B1",t.font="12px sans-serif",t.textAlign="end",t.fillText(h.toString(),i,e))}drawBar(t,i){if(null==t)return;const e=this.graphData.label.length;this.barWidth=Math.round(this.graphwidth/e)-this.barhMargine,this.rightMargin=this.width-(this.keisenMargine+(this.barWidth+this.barhMargine)*e-this.barWidth);const h=i.height-this.keisenMargine+20,a=Math.ceil(this.graphData.value.reduce((t,i)=>Math.max(t,i))),s=Math.ceil(this.graphData.value.reduce((t,i)=>Math.min(t,i))),n=this.makeYaxis(s,a,10);console.log(n);let r=i.height-this.keisenMargine,l=0;for(let e=0;e<n.length;e++)0==n[n.length-e-1]&&(r=this.keisenMargine+Math.ceil(this.graphHeight*(e+1)/n.length)),console.log(`genten:${r} low:${i.height-this.keisenMargine}`),this.drawGentenKeisen(t,this.keisenMargine,r,this.graphwidth),l=this.keisenMargine+Math.ceil(this.graphHeight/n.length)*e;const o=r-this.keisenMargine,g=l-r;for(let i=0;i<e;i++){if(null==this.overlay.context)return;this.overlay.context.fillStyle="red",this.overlay.context.font="12px sans-serif",this.overlay.context.textAlign="left",this.overlay.context.fillText(this.getXlabel(i),this.keisenMargine+1.5*this.barhMargine+(this.barWidth+this.barhMargine)*i,h),t.fillStyle="#81C784",t.fillRect(this.keisenMargine+this.barhMargine+(this.barWidth+this.barhMargine)*i,this.graphData.value[i]>=0?r-1:r+1,this.barWidth,this.graphData.value[i]>=0?-o*this.graphData.value[i]/n[n.length-1]:g*this.graphData.value[i]/n[0]),this.overlay.context.fillText(this.graphData.value[i].toLocaleString(),this.keisenMargine+1.5*this.barhMargine+(this.barWidth+this.barhMargine)*i,this.graphData.value[i]>=0?r-o*this.graphData.value[i]/n[n.length-1]-10:r+g*this.graphData.value[i]/n[0]+20)}}drawGentenKeisen(t,i,e,s){null!=t&&(t.strokeStyle=h,t.strokeStyle=a,t.beginPath(),t.moveTo(i,e),t.lineTo(i,e),t.lineTo(i+s,e),t.stroke())}getXlabel(t){let i="";if("m"==this.graphData.term){let e=this.graphData.label[t].split("/");this.yearLabel!=e[0]||""==this.yearLabel?(this.yearLabel=e[0],i=e[0]+"年"):i=e[1]+"月"}return i}makeYaxis(t,i,e=10){let h=[];t==i&&(t-=10,i+=10);e<2?e=2:e>2&&(e-=2);let a=(i-t)/e,s=Math.floor(Math.log10(a)),n=Math.pow(10,s),r=Math.floor(a/n+.5)*n,l=r*Math.floor(t/r),o=r*Math.ceil(i/r),g=l;for(;h.push(g),g+=r,!(g>o););return h}drow(t,i){if(null==i)return;i.clearRect(0,0,this.width,this.height),t.offsetX<=this.keisenMargine+this.barhMargine?this.n.x=this.keisenMargine+this.barhMargine:t.offsetX>=this.width-this.rightMargin?this.n.x=this.width-this.rightMargin:this.n.x=Math.floor((t.offsetX-this.keisenMargine)/(this.barWidth+this.barhMargine))*(this.barWidth+this.barhMargine)+(this.keisenMargine+this.barhMargine),t.offsetY<this.keisenMargine?this.n.y=this.keisenMargine:t.offsetY>this.height-this.keisenMargine?this.n.y=this.height-this.keisenMargine:this.n.y=t.offsetY,i.fillStyle="#ccc",i.fillRect(this.n.x,this.keisenMargine,this.barWidth,this.graphHeight);let e=Math.floor((t.offsetX-this.keisenMargine)/(this.barWidth+this.barhMargine));e<0?e=0:e>this.graphData.label.length-1&&(e=this.graphData.label.length-1),i.fillRect(this.keisenMargine,this.n.y,this.graphwidth,1),i.fillStyle="red",i.font="12px sans-serif",i.textBaseline="bottom",i.fillText(""+this.convertLabel(this.graphData.label[e]),this.n.x,this.keisenMargine-24),i.fillText(`${this.graphData.value[e].toLocaleString()}${this.graphData.unit}`,this.n.x,this.keisenMargine-10)}convertLabel(t){return`${t.split("/")[0]}年${t.split("/")[1]}月`}};const n={term:"m",label:["2018/04","2018/05","2018/06","2018/07","2018/08","2018/09","2018/10","2018/11","2018/12","2019/01","2019/02","2019/03","2019/04","2019/05","2019/06","2019/07","2019/08","2019/09","2019/10","2019/11","2019/12","2020/01","2020/02","2020/03","2020/04","2020/05"],value:[10138,8675,6699,7971,9589,9867,11360,8589,8162,7345,6319,6549,7026,8314,10143,-9143,-5259,-4446,-3857,-3100,-2406,2320,6578,3322,2625,845],unit:"億円",name:"営業収益"};window.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("graph");if(null==t)return;new s(t,n)}))}});